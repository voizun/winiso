name: Win11ISO

on:
  workflow_dispatch:

jobs:
  Win11ISO:
    runs-on: windows-2025
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - run: unzip *.zip

      - run: |
          sed -i -e "s/powershell/pwsh/" uup_download_windows.cmd
          sed -i -e 's/$/\r/g' uup_download_windows.cmd
          cd Drivers
          curl -L -o GPD-All-WIN10_X64_drivers_V6.tar.zst "https://drive.usercontent.google.com/download?id=1qBe9-JKIFFoln4hxt-XbbF-j8hTaFplx&export=download&authuser=0&confirm=t&uuid=c89118e5-7c9e-4b03-b610-227e064a4ba3&at=ALWLOp4Kw9UyTOWc36R2a4yq8Dij%3A1764812385835"
          tar xf GPD-All-WIN10_X64_drivers_V6.tar.zst
          tree
          
      - run: .\uup_download_windows.cmd

      - run: split -b 2000M -d *.ISO WIN11.ISO
        shell: bash


      - run: gh release create Win11ISO WIN11.ISO??
        shell: bash
        env:
          GH_TOKEN: ${{ github.token }}
      
